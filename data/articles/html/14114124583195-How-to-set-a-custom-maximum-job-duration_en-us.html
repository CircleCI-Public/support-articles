<p>Currently the maximum duration of a job is "hard-coded" at the organization level, and is solely <a href="https://support.circleci.com/hc/en-us/articles/4411086979867-Updates-to-maximum-duration-of-jobs" target="_blank" rel="noopener noreferrer">based on the organization's plan</a>.</p>
<p>This article explains how to leverage the <a href="https://circleci.com/docs/configuration-reference/#background-commands" target="_blank" rel="noopener noreferrer">step-level <code>background</code> attribute</a> and the <a href="https://circleci.com/docs/api/v2/index.html#operation/cancelJob" target="_blank" rel="noopener noreferrer">CircleCI API v2 "Cancel job" endpoint</a> to customize a job's maximum duration.</p>
<p> </p>
<h2 id="h_01HP1R3G3W63SKPBYAPF8P0FA1" data-renderer-start-pos="8009">Prerequisites</h2>
<p>You will need to store a personal API token (it can be a personal API token generated for a machine-user) in a project-level or context-level environment variable.</p>
<p> </p>
<h2 id="h_01HP1R3G3W081GDZJSPD1E4QMX" data-renderer-start-pos="8152">Instructions</h2>
<p>Add the following as the first step of your job:</p>
<pre style="background-color: #f3f3f3; padding: 5px;">- run:<br>    name: Set maximum job duration to 90 minutes<br>    background: true<br>    command: |<br>      sleep 90m<br>      curl --request POST \<br>      --url https://circleci.com/api/v2/project/gh/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME/job/$CIRCLE_BUILD_NUM/cancel \<br>      --header "Circle-Token: $CIRCLECI_API_TOKEN"</pre>
<p><em>Note: <code style="font-size: 15px;">CIRCLE_PROJECT_USERNAME</code><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;">,</span><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;"> </span><code style="font-size: 15px;">CIRCLE_PROJECT_REPONAME</code><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;">, and</span><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;"> </span><code style="font-size: 15px;">CIRCLE_BUILD_NUM</code><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;">, are <a href="https://circleci.com/docs/variables/#built-in-environment-variables" target="_blank" rel="noopener noreferrer">built-in environment variables</a>, and are automatically populated for each job.</span></em></p>