<h1 id="h_01HE6E735QABBC3F2NTJRQ8HN0">Overview</h1>
<p>When using <code>git clone</code> with Git LFS, you may encounter errors like the following:</p>
<div class="codeblock relative font-sans text-[16px]">
    <pre style="background-color: #f3f3f3; padding: 5px;" data-darkreader-inline-bgcolor=""><code>batch response: Bad credentials
batch response: Bad credentials0/1), 0 B | 0 B/s
Failed to fetch some objects from<br><br>smudge filter lfs failed<br><br>warning: Clone succeeded, but checkout failed.<br>You can inspect what was checked out with 'git status'<br>and retry with 'git restore --source=HEAD :/'</code></pre>
</div>
<p>These errors indicate authentication issues during the cloning process, specifically when using deploy keys.</p>
<p> </p>
<h1 id="h_01HE6E735RDK0G2Y4E60ZSMQV2">Solution</h1>
<p><strong>If you are using the <a href="https://circleci.com/docs/github-integration/" target="_blank" rel="noopener noreferrer">CircleCI GitHub OAuth Integration</a>/<a href="https://circleci.com/docs/bitbucket-integration/">CircleCI BitBucket OAuth Integration</a></strong>: Deploy keys are typically used for automated processes and have more restricted permissions compared to user keys. To resolve the "Bad credentials" errors, you should use a user key instead of a deploy key. </p>
<p>You can configure this on your <strong>Project Settings</strong> -&gt; <strong>SSH Keys </strong>-&gt; <strong>Add User Key.</strong></p>
<p>CircleCI recommends the use of a <a href="https://circleci.com/docs/github-integration/#controlling-access-via-a-machine-user" target="_blank" rel="noopener noreferrer">Machine user for a User key</a> that has access to the specific repositories that you need to access.</p>
<p>You can also create an Additional SSH key that has access to these dependencies. Please view the documentation on how to accomplish this <a href="https://circleci.com/docs/add-ssh-key/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p> </p>
<p><strong>If you are using the <a href="https://circleci.com/docs/github-apps-integration/" target="_blank" rel="noopener noreferrer">CircleCI GitHub Apps</a>/<a href="https://circleci.com/docs/gitlab-integration/" target="_blank" rel="noopener noreferrer">CircleCi GitLab Integrations</a>: </strong>Please make sure that the SSH Key that you have configured for your Project has access to any repositories that you need access to. If the SSH configured does not have access, please feel free to create an additional one which can be found <a href="https://circleci.com/docs/add-ssh-key/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p> </p>
<h1 id="h_01HE6E735RTJ3016ZPE7WRR08V">Conclusion</h1>
<p>By using a user key instead of a deploy key, you can resolve the "Bad credentials" errors when using <code>git clone</code> with Git LFS. User keys have broader permissions and are better suited for interactive operations.</p>
<p> </p>
<h1 id="h_01HE6EQN1EXYK362Q78M4W11E2">Additional Resources</h1>
<ul>
    <li><a href="https://git-lfs.com/" target="_blank" rel="noopener noreferrer">Git LFS Documentation</a></li>
    <li><a href="https://support.circleci.com/hc/en-us/articles/12015682624667">Best Practices for Rotating User SSH keys and Additional SSH keys</a></li>
</ul>
<p> </p>