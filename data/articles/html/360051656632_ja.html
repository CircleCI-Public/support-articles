<p>CircleCI コンビニエンス イメージにインストールされ設定されている Node のバージョンと、必要としているバージョンと一致していないことがあります。 <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">Node Version Manager (NVM).</a> を使用すると、必要な Node バージョンをインストールして切り替えることができます。</p>
<pre>- run:<br>    name: Node バージョンの切り替え<br>    command: |<br>    set +e<br>    wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash<br>    export NVM_DIR="$HOME/.nvm"<br>    [ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"<br>    [ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"<br>    nvm install v12<br>    nvm alias default 12.19.0<br><br>    echo 'export NVM_DIR="$HOME/.nvm"' &gt;&gt; $BASH_ENV<br>    echo '[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"' &gt;&gt; $BASH_ENV</pre>
<p>上記のコマンドでは、Node v12 をインストールし、ジョブの以降の部分で使用されるデフォルト値を v12.19.0 に設定しています。 この run コマンドはジョブ実行の冒頭近くに配置するようにしてください。実際の状況に応じて修正が必要な項目は下記の箇所だけです。</p>
<pre style="background-color: #f3f3f3;">nvm install v12<br>nvm alias default 12.19.0</pre>
<p>install コマンドの引数をインストールしたい Node バージョンに切り替え、default コマンドの引数にジョブの残りの部分で実際に使用するバージョンを設定します。</p>