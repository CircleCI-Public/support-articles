<h1><span>UseContainerSupport</span></h1>
<p><span>Java builds fail with the error:<br></span></p>
<pre style="background-color: #f3f3f3;"><code>Unrecognized VM option 'UseCGroupMemoryLimitForHeap'<br>Error: Could not create the Java Virtual Machine.<br>Error: A fatal exception has occurred. Program will exit.</code></pre>
<p><span><br>On August 17th, 2020 CircleCI updated the Android convenience image from Java JDK 8 to JDK 11. </span><code style="background-color: #f3f3f3;">UseCGroupMemoryLimitForHeap</code><span> has been removed completely in JDK 11 and replaced with </span><code style="background-color: #f3f3f3;">UseContainerSupport</code><span>.<br><br>Customers should modify their Java options to make use of <code style="background-color: #f3f3f3;">UseContainerSupport</code> instead.<br><br>You can read more about our announcement of this change here:</span></p>
<p><span><a href="https://discuss.circleci.com/t/android-convenience-image-moving-to-java-v11-on-august-17th/36601" target="_blank" rel="noopener">Android Convenience Image Moving to Java v11 on August 17th</a><br><br>This documentation from the eclipse organization may be helpful for more information on this feature:</span></p>
<p><span style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;"></span><a style="background-color: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;" href="https://www.eclipse.org/openj9/docs/xxusecontainersupport/" target="_blank" rel="noopener">XX:[+|-]UseContainerSupport</a></p>
<p>An additional, but not directly related issue to the above error, is that you may need to increment your cache keys `restore_cache`, `save_cache` as there may have build data from Java 8 that will also cause build issues from the upgrade.</p>
<p>As always, please do feel free to reach out to submit a ticket to <a href="https://support.circleci.com/">CircleCI Support</a> and we can help you through this process.</p>