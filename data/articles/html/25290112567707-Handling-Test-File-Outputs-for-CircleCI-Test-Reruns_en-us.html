<h2 id="h_01HWNP5WRBGWE64CGR9GPWVDS4">Overview</h2>
<p>When rerunning tests in CircleCI, users may see an output that lists individual test suites instead of individual spec files. This article provides a solution to ensure that file names are outputted, making it easier to rerun tests in case of failure.</p>
<h2 id="h_01HWNP5WRBZMAV5GA1GWJ5ZBDF">Prerequisites</h2>
<ul>
    <li>A CircleCI account and a project set up for continuous integration.</li>
    <li>Familiarity with CircleCI configuration and the <code>circleci tests</code> command.</li>
</ul>
<h2 id="h_01HWNP5WRBVCTBTXN23JMVKMVD">Instructions</h2>
<p>To capture the test file names during a rerun, follow these steps:</p>
<ol>
    <li>Use the <code>circleci tests glob</code> command to list your test files.</li>
    <li>Pipe the output to <code>circleci tests run</code> with the <code>--command</code> flag to save the file names to a temporary file.</li>
    <li>Optionally, use the <code>--split-by=timings</code> flag to split tests based on their previous run times.</li>
    <li>Check if the temporary file is non-empty before proceeding to halt execution if necessary.</li>
    <li>Create a directory for test results.</li>
    <li>Pass the list of test file names from the temporary file to your test runner command.</li>
    <li>Store the test results.</li>
</ol>
<p>Here's an example configuration:</p>
<pre style="padding: 8px; font-family: SFMono-Regular, Consolas, ' Liberation Mono' , Menlo, Courier, monospace; font-size: 12.025px; color: #49545c; border-radius: 8px; display: block; margin: 0px; line-height: 18px; word-break: break-all; overflow-wrap: break-word; white-space: pre-wrap; background: #f8f9f9; border: 1px solid #e9ebed; outline: 0px; vertical-align: baseline; box-sizing: border-box; margin-block: 4px 12px; margin-inline: 0px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><code style="padding: 0px; font-family: SFMono-Regular, Consolas, ' Liberation Mono' , Menlo, Courier, monospace; font-size: 12px; color: #49545c; border-radius: 4px; background: transparent; border: transparent; margin: 0px; outline: 0px; vertical-align: baseline; box-sizing: border-box; white-space: pre-wrap;">- run:<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">    command: |<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">      circleci tests glob "src/**/*js" | circleci tests run --command="&gt;files.txt xargs echo" --verbose --split-by=timings #split-by=timings is optional<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">      [ -s tmp/files.txt ] || circleci-agent step halt #if a re-run and there are no tests to re-run for this parallel run, stop execution<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;"><br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">- run:<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">    name: Run tests<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">    command: |<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">      mkdir test-results<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">      ... #pass files.txt into your test command<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;"><br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">- store_test_results:<br style="box-sizing: border-box; font-family: Consolas, ' Liberation Mono' , Menlo, ' Bitstream Vera Sans Mono' , Courier, monospace !important;">    path: test-results</code></pre>
<p>This configuration writes the list of test file names to <code>files.txt</code>. On a non-rerun, this list will include all test file names. On a rerun, it will contain only the names of files with at least one failed test from the previous run.</p>
<h2 id="h_01HWNP5WRBS35PSZRC8XD3DMSK">Solution</h2>
<p>By following the steps above, you can ensure that the output of a rerun will be the file names of the tests, rather than the names of individual test suites. This allows for a more straightforward mapping of tests to files and simplifies the rerun process.</p>
<h2 id="h_01HWNP5WRBAYQ8BHKKMQXKX4B2">Additional Resources</h2>
<p>For more detailed information on test splitting and other advanced features, refer to the <a href="https://circleci.com/docs/2.0/parallelism-faster-jobs/">CircleCI Documentation</a>.</p>