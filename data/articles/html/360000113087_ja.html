<p>You may be running into a Docker bootstrap race condition in your test suite. The test suite should not start until all necessary services are fully bootstrapped. Note that this typically includes more execution than simply starting up the containers. Some DB images create default databases and tables on container start. Selenium containers may require some time to start up the browser.</p>
<p>We suggest dockerize: <a href="https://github.com/jwilder/dockerize" target="_blank" rel="noopener">https://github.com/jwilder/dockerize</a> as a tool for managing container bootstrapping. The `-wait` subcommand will run commands on a sleep loop to test for bootstrap completion. You'll need to determine the appropriate commands to test that each container has fully bootstrapped.</p>
<p>You can see examples of how to use dockerize on our forum: <a href="https://discuss.circleci.com/t/prevent-race-conditions-by-waiting-for-services-with-dockerize/11215" target="_self">https://discuss.circleci.com/t/prevent-race-conditions-by-waiting-for-services-with-dockerize/11215</a></p>
<p> </p>
<p>Another utility that might be useful is 'Wait Port': <a href="https://github.com/dwmkerr/wait-port" target="_blank" rel="noopener">https://github.com/dwmkerr/wait-port</a></p>